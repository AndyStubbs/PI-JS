<!DOCTYPE html>
<html>
	<head>
		<title>Intouch 01</title>
		<script type="text/toml">
			[[TOML_START]]
			test = "screenshot.js"
			file = "intouch_01"
			name = "intouch 01"
			width = 160
			height = 100
			delay = 0
			[[TOML_END]]
		</script>
		<script src="../../build/qbs.min.js"></script>
		<style>
			html, body {
				background-color: grey;
			}
		</style>
	</head>
<body>
<script>
	$.ready( function () {
		var last = {x: 0, y: 0};
		var isDrawing = false;
		$.screen( "320x200" );
		$.setPinchZoom( false );

		var corner = $.get(0, 0, 8, 14);
		setInterval( function () {
			var touch = $.intouch();
			$.put( corner, 0, 0 );
			$.locate(0, 0);
			$.print( touch.touches.length );
			if( touch.touches.length > 0 ) {
				for( var i = 0; i < touch.touches.length; i++ ) {
					var touchData = touch.touches[ i ];
					if( ! isDrawing ) {
						$.pset( touchData.x, touchData.y );
					} else if( touchData.x !== last.x || touchData.y !== last.y ) {
						$.line( last.x, last.y, touchData.x, touchData.y);
					}
					last.x = touchData.x;
					last.y = touchData.y;
					isDrawing = true;
				}
			} else {
				isDrawing = false;
			}
			$.render();

			var keys = $.inkey();
			for( i = 0; i < 10; i++) {
				if( keys[ "Digit" + i ] ) {
					$.color( i );
				}
			}

		}, 60 );
	} );
</script>
</body>
</html>
