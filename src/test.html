<!DOCTYPE html>
<html>
<head>
	<!--meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/-->
	<title>Test App</title>
	<script src="qbs.js"></script>
	<script src="qbs-util.js"></script>
	<script src="qbs-keyboard.js"></script>
	<script src="qbs-screen.js"></script>
	<script src="qbs-screen-mouse.js"></script>
	<script src="qbs-screen-touch.js"></script>
	<script src="qbs-screen-commands.js"></script>
	<script src="qbs-screen-helper.js"></script>
	<script src="qbs-screen-graphics.js"></script>
	<script src="qbs-screen-paint.js"></script>
	<script src="qbs-screen-images.js"></script>
	<script src="qbs-screen-draw.js"></script>
	<script src="qbs-screen-print.js"></script>
	<script src="qbs-sound.js"></script>
	<script src="fonts/font-6x8.js"></script>
	<script src="fonts/font-6x6.js"></script>
	<script src="fonts/font-8x8.js"></script>
	<script src="fonts/font-8x14.js"></script>
	<script src="fonts/font-8x16.js"></script>
	<script src="qbs-init.js"></script>
	<style>
		html, body {
			background-color: grey;
		}
	</style>
</head>
<body>
<script>
	$.ready( function () {
		var last = {x: 0, y: 0};
		var isDrawing = false;
		$.screen("160x100");
		$.startMouse();
		$.color( 16 );
		$.rect( 0, 0, 8, 14 );
		$.paint( 1, 1, 16 );
		$.color( 7 );
		var corner = $.get(0, 0, 8, 14);
		setInterval( function () {
			var mouse = $.inmouse();
			$.put( corner, 0, 0 );
			$.locate(0, 0);
			$.print( mouse.buttons );
			if( mouse.buttons > 0 ) {
				if( ! isDrawing ) {
					$.pset( mouse.x, mouse.y );
				} else if( mouse.x !== last.x || mouse.y !== last.y ) {
					$.line( last.x, last.y, mouse.x, mouse.y);
				}
				last.x = mouse.x;
				last.y = mouse.y;
				isDrawing = true;
			} else {
				isDrawing = false;
			}
			$.render();

			var keys = $.inkey();
			for( i = 0; i < 10; i++) {
				if( keys[ "Digit" + i ] ) {
					$.color( i );
				}
			}

		}, 60 );
	} );
</script>
</body>
</html>