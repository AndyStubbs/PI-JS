<!DOCTYPE html>
<html>
<head>
	<!--meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/-->
	<title>Test App</title>
	<script src="../test/libs/seedrandom.js"></script>
	<script src="qbs.js"></script>
	<script src="qbs-util.js"></script>
	<script src="qbs-keyboard.js"></script>
	<script src="qbs-gamepad.js"></script>
	<script src="qbs-font.js"></script>
	<script src="qbs-screen.js"></script>
	<script src="qbs-screen-mouse.js"></script>
	<script src="qbs-screen-touch.js"></script>
	<script src="qbs-screen-commands.js"></script>
	<script src="qbs-screen-helper.js"></script>
	<script src="qbs-screen-graphics.js"></script>
	<script src="qbs-screen-paint.js"></script>
	<script src="qbs-screen-bezier.js"></script>
	<script src="qbs-screen-images.js"></script>
	<script src="qbs-screen-print.js"></script>
	<script src="qbs-screen-table.js"></script>
	<script src="qbs-screen-draw.js"></script>
	<script src="qbs-sound.js"></script>
	<script src="qbs-play.js"></script>
	<script src="fonts/font-data.js"></script>
	<script src="qbs-pal.js"></script>
	<script src="qbs-init.js"></script>
	<style>
		html, body {
			color: white;
			background-color: blue;
			margin: 10px;
		}
		pre {
			width: 100%;
			color: white;
			font-size: 14px;
		}
		textarea {
			width: 800px;
			height: 300px;
		}
	</style>
</head>
<body>

<script>
	var sound1, sound2;
	var step = 1;
	sound1 = $.createAudioPool( "../test/tests_input/sounds/RECRUITS.wav", 3 );
	sound2 = $.createAudioPool( "../test/tests_input/sounds/TEST.wav", 3 );

	//sound = $.loadSound( "../test/tests_input/sounds/star.wav", 6 );
	$.ready( function () {
		$.screen( "600x300" );
		$.print(
			"1. Two sounds will play. They will " +
			"stop after 2.5 seconds."
		);
		$.print(
			"2. Two sounds will play but be only the " +
			" first will stop after 2.5 seconds."
		);
		$.print( "3. Any subsequent steps will play the first sound pool." );
		$.print( "Press any key to start." );
		$.render();
		$.onkey( "any", start );
	} );
	function start() {
		if( step === 1 ) {
			$.print( "Step 1 - 2 songs playing" );
			$.render();
			$.playAudioPool( sound1, 0.25, 3.5, 4.5 );
			setTimeout( function () {
				$.playAudioPool( sound2, 0.5, 0 );
			}, 500 );
			setTimeout( function () {
				$.stopAudioPool();
				step = 2;
				$.print( "Step 1 - 2 songs stopped" );
				$.render();
			}, 2500 );
		} else if( step === 2 ) {
			$.print( "Step 2 - 2 songs playing" );
			$.render();
			$.playAudioPool( sound1, 0.25, 3.5, 4.5 );
			setTimeout( function () {
				$.playAudioPool( sound2, 0.5, 0 );
			}, 500 );
			setTimeout( function () {
				$.stopAudioPool( sound1 );
				step = 3;
				$.print( "Step 2 - 1 song stopped" );
				$.render();
			}, 2500 );
		} else {
			$.playAudioPool( sound1, 0.25, 3.5, 4.5 );
			$.print( "Sound Started" );
			$.render();
		}
	}
</script>

</body>
</html>