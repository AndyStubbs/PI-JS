window.qbs=function(){"use strict";var a,e,n,t,r,o;function i(e,t,n,r){a.commands[e]=t,o.push({name:e,fn:t,isInternal:n,isScreen:r})}function s(n){n.isInternal||(n.isScreen?(a.screenCommands[n.name]={fn:n.fn},e[n.name]=function(){var e=[].slice.call(arguments),t=d(void 0,n.name);if(!1!==t)return a.commands[n.name](t,e)}):e[n.name]=function(){var e=[].slice.call(arguments);return a.commands[n.name](e)})}function d(e,t){return null===a.activeScreen?(console.error(t+": No screens available for command."),!1):(null==e&&(e=a.activeScreen.id),Number.isInteger(e)&&!a.screens[e]?(console.error(t+": Invalid screen id."),!1):a.screens[e])}function c(){var e,t;if("loading"!==document.readyState)for(n=!1,t=r.slice(),r=[],e=0;e<t.length;e++)t[e]();else setTimeout(c,10)}return e={_:{addCommand:i,addCommands:function(e,n,r){i(e,function(e,t){(e.pixelMode?n:r)(e,t)},!1,!0)},processCommands:function(){var e;for(o=o.sort(function(e,t){var n=e.name.toUpperCase(),r=t.name.toUpperCase();return n<r?-1:r<n?1:0}),e=0;e<o.length;e++)s(o[e])},addPen:function(e,t,n){a.penList.push(e),a.pens[e]={cmd:t,cap:n}},data:a={nextScreenId:t=0,screens:{},activeScreen:null,images:{},imageCount:0,fCos:[],fSin:[],defaultPrompt:219,defaultFont:{width:8,height:8,x:0,y:0,data:null,printFunction:null,calcWidth:null},nextFontId:0,fonts:{},defaultPalette:["#000000","#0000AA","#00AA00","#00AAAA","#AA0000","#AA00AA","#AA5500","#AAAAAA","#555555","#5555FF","#55FF55","#55FFFF","#FF5555","#FF55FF","#FFFF55","#FFFFFF","#000000","#141414","#202020","#2D2D2D","#393939","#454545","#515151","#616161","#717171","#828282","#929292","#A2A2A2","#B6B6B6","#CACACA","#E3E3E3","#FFFFFF","#0000FF","#4100FF","#7D00FF","#BE00FF","#FF00FF","#FF00BE","#FF007D","#FF0041","#FF0000","#FF4100","#FF7D00","#FFBE00","#FFFF00","#BEFF00","#7DFF00","#41FF00","#00FF00","#00FF41","#00FF7D","#00FFBE","#00FFFF","#00BEFF","#007DFF","#0041FF","#7D7DFF","#9E7DFF","#BE7DFF","#DF7DFF","#FF7DFF","#FF7DDF","#FF7DBE","#FF7D9E","#FF7D7D","#FF9E7D","#FFBE7D","#FFDF7D","#FFFF7D","#DFFF7D","#BEFF7D","#9EFF7D","#7DFF7D","#7DFF9E","#7DFFBE","#7DFFDF","#7DFFFF","#7DDFFF","#7DBEFF","#7D9EFF","#B6B6FF","#C6B6FF","#DBB6FF","#EBB6FF","#FFB6FF","#FFB6EB","#FFB6DB","#FFB6C6","#FFB6B6","#FFC6B6","#FFDBB6","#FFEBB6","#FFFFB6","#EBFFB6","#DBFFB6","#C6FFB6","#B6FFB6","#B6FFC6","#B6FFDB","#B6FFEB","#B6FFFF","#B6EBFF","#B6DBFF","#B6C6FF","#000071","#1C0071","#390071","#550071","#710071","#710055","#710039","#71001C","#710000","#711C00","#713900","#715500","#717100","#557100","#397100","#1C7100","#007100","#00711C","#007139","#007155","#007171","#005571","#003971","#001C71","#393971","#453971","#553971","#613971","#713971","#713961","#713955","#713945","#713939","#714539","#715539","#716139","#717139","#617139","#557139","#457139","#397139","#397145","#397155","#397161","#397171","#396171","#395571","#394571","#515171","#595171","#615171","#695171","#715171","#715169","#715161","#715159","#715151","#715951","#716151","#716951","#717151","#697151","#617151","#597151","#517151","#517159","#517161","#517169","#517171","#516971","#516171","#515971","#000041","#100041","#200041","#310041","#410041","#410031","#410020","#410010","#410000","#411000","#412000","#413100","#414100","#314100","#204100","#104100","#004100","#004110","#004120","#004131","#004141","#003141","#002041","#001041","#202041","#282041","#312041","#392041","#412041","#412039","#412031","#412028","#412020","#412820","#413120","#413920","#414120","#394120","#314120","#284120","#204120","#204128","#204131","#204139","#204141","#203941","#203141","#202841","#2D2D41","#312D41","#352D41","#3D2D41","#412D41","#412D3D","#412D35","#412D31","#412D2D","#41312D","#41352D","#413D2D","#41412D","#3D412D","#35412D","#31412D","#2D412D","#2D4131","#2D4135","#2D413D","#2D4141","#2D3D41","#2D3541","#2D3141","#000000","#000000","#000000","#000000","#000000","#000000","#000000"],commands:{},screenCommands:{},defaultPenDraw:null,pens:{},penList:[]},resume:function(){0==--t&&c()},wait:function(){t++,n=!0}}},i("getScreenData",d,!(n=!(r=[])),!(o=[])),i("ready",function(e){var t;t=e[0],qbs.util.isFunction(t)&&(n?r.push(t):"loading"===document.readyState?(r.push(t),setTimeout(c,10)):t())},!1,!1),i("setScreen",function(e){var t;t=e[0],a.activeScreen=a.screens[t.id]},!1,!1),i("removeAllScreens",function(){var e;for(e in a.screens)a.screens[e].screenObj.removeScreen()},!1,!1),i("getScreen",function(e){var t;return t=e[0],d(t,"getScreen").screenObj},!1,!1),i("setDefaultPal",function(e){var t,n;if(t=e[0],!Array.isArray(t))return void console.error("setDefaultPal: parameter pal is not an array.");for(a.defaultPalette=[],n=0;n<t.length;n++)null===qbs.util.convertToColor(t[n])?(console.error("setDefaultPal: invalid color value inside array pal."),a.defaultPalette.push(qbs.util.convertToColor("#000000"))):a.defaultPalette.push(qbs.util.convertToColor(t[n]));a.defaultPalette[0].a=0},!1,!1),i("getDefaultPal",function(e){var t,n;for(n=[],t=0;t<a.defaultPalette.length;t++)a.defaultPalette[t].r,a.defaultPalette[t].g,a.defaultPalette[t].b,a.defaultPalette[t].a,a.defaultPalette[t].s,n.push(a.defaultPalette[t]);return n},!1,!1),e}(),window.qbs.util=function(){"use strict";function a(e){var t,n,r,a,o;return r=4===(o=e).length?(t=16*parseInt(e.slice(1,2),16)-1,n=16*parseInt(e.slice(2,3),16)-1,16*parseInt(e.slice(3,4),16)-1):(t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),parseInt(e.slice(5,7),16)),{r:t,g:n,b:r,a:a=9===e.length?(o=e.slice(0,7),parseInt(e.slice(7,9),16)):255,s:"rgba("+t+","+n+","+r+","+a+")",s2:o}}function o(e){Number.isInteger(e)||(e=255),e=n(e,0,255);var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t.toUpperCase()}function i(e,t,n,r){return"#"+o(e)+o(t)+o(n)+o(r)}function t(e,t,n,r){return a(i(e,t,n,r))}function n(e,t,n){return Math.min(Math.max(e,t),n)}return{isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isDomElement:function(e){return e instanceof Element},hexToRgb:a,cToHex:o,rgbToHex:i,rgbToColor:t,convertToColor:function(e){return void 0===e?null:Array.isArray(e)&&2<e.length?t(e[0],e[1],e[2],e[3]):Number.isInteger(e.r)&&Number.isInteger(e.g)&&Number.isInteger(e.b)?t(e.r,e.g,e.b,e.a):/(^#[0-9A-F]{8}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?a(e):0!==e.indexOf("rgb")||(e=function(e){var t,n,r;for(e=e.slice(e.indexOf("(")+1,e.indexOf(")")),t=e.split(","),r=[],n=0;n<t.length;n++)r.push(parseInt(t[n]));return r}(e)).length<3?null:t(e[0],e[1],e[2],e[3])},checkColor:function(e){var t=(new Option).style;return t.color=e,""!==t.color},compareColors:function(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a},copyProperties:function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},convertToArray:function(e){var t,n;for(t in n=[],e)e.hasOwnProperty(t)&&n.push(e[t]);return n},deleteProperties:function(e){var t;for(t in e)e.hasOwnProperty(t)&&delete e[t]},clamp:n,inRange:function(e,t){return e.x>=t.x&&e.x<t.x+t.width&&e.y>=t.y&&e.y<t.y+t.height},inRange2:function(e,t,n,r,a,o){return n<=e&&e<n+a&&r<=t&&t<r+o},rndRange:function(e,t){return Math.random()*(t-e)+e},degreesToRadian:function(e){return e*(Math.PI/180)},radiansToDegrees:function(e){return e*(180/Math.PI)},sanitizeBool:function(e){return!!e},padL:function(e,t,n){var r,a;for("string"!=typeof n&&(n=" "),r=(e+=a="").length;r<t;r++)a+=n;return a+e},padR:function(e,t,n){var r;for("string"!=typeof n&&(n=" "),r=(e+="").length;r<t;r++)e+=n;return e},math:{deg30:Math.PI/6,deg45:Math.PI/4,deg60:Math.PI/3,deg90:Math.PI/2,deg120:2*Math.PI/3,deg135:3*Math.PI/4,deg150:5*Math.PI/6,deg180:Math.PI,deg210:7*Math.PI/6,deg225:5*Math.PI/4,deg240:4*Math.PI/3,deg270:3*Math.PI/2,deg300:5*Math.PI/3,deg315:7*Math.PI/4,deg330:11*Math.PI/6,deg360:2*Math.PI}}}(),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),function(){"use strict";var d,s,c,u,l,m,f,h,g,p,b,v,A,y,C;function a(e){var t,n,r,a;if(t=e[0],n=e[1],isNaN(t)||"string"==typeof t)if(qbs.util.isFunction(n)||void 0===n){if(r=!1,qbs.util.isFunction(n)||(r=!0),"string"==typeof t&&"any"===t.toLowerCase())if(r)C=[];else for(a=C.length-1;0<=a;a--)C[a]===n&&C.splice(a,1);else if(y[t])if(r)y[t]=[];else for(a=y[t].length-1;0<=a;a--)y[t][a]===n&&y[t].splice(a,1)}else console.error("offkey: fn is not a valid function.  Leave this undefined or set it to a function.");else console.error("offkey: key needs to be either an interger keyCode or a string.")}function F(e){var t,n,r,a,o,i,s;if(0<m.length&&f<m.length){if(t=(i=m[f]).prompt+i.val,!(s=d.commands.getScreenData(null,"input")))return null;500<(new Date).getTime()-h&&(p=!p,h=(new Date).getTime()),p&&!e&&(t+=String.fromCharCode(s.printCursor.prompt)),r=$.posPx(),a=(t.length+1)*s.printCursor.charWidth,o=s.printCursor.charHeight,b?v<a?($.put(b,r.x,r.y),b=$.get(r.x,r.y,r.x+a,r.y+o)):$.put(b,r.x,r.y):b=$.get(r.x,r.y,r.x+a,r.y+o),v=a,n=$.pos(),$.print(t,!0),$.locate(n.col,n.row),$.render()}else clearInterval(g),b=null,v=0}function x(e){e.isNumber&&(""===e.val?isNaN(e.min)?e.val=0:e.val=e.min:e.val=Number(e.val))}d=qbs._.data,c={Alt_1:"AltLeft",Alt_2:"AltRight",ArrowDown_0:"ArrowDown",ArrowLeft_0:"ArrowLeft",ArrowRight_0:"ArrowRight",ArrowUp_0:"ArrowUp","\\_0":"Backslash","|_0":"Backslash","~_0":"Backquote","`_0":"Backquote",Backspace_0:"Backspace","[_0":"BracketLeft","{_0":"BracketLeft","]_0":"BracketRight","}_0":"BracketRight",CapsLock_0:"CapsLock",ContextMenu_0:"ContextMenu",Control_1:"ControlLeft",Control_2:"ControlRight",",_0":"Comma","<_0":"Comma",Delete_0:"Delete",")_0":"Digit0","0_0":"Digit0","1_0":"Digit1","!_0":"Digit1","2_0":"Digit2","@_0":"Digit2","3_0":"Digit3","#_0":"Digit3","4_0":"Digit4",$_0:"Digit4","5_0":"Digit5","%_0":"Digit5","6_0":"Digit6","^_0":"Digit6","7_0":"Digit7","&_0":"Digit7","8_0":"Digit8","*_0":"Digit8","9_0":"Digit9","(_0":"Digit9",End_0:"End",Enter_0:"Enter","+_0":"Equal","=_0":"Equal",Escape_0:"Escape",F1_0:"F1",F2_0:"F2",F3_0:"F3",F4_0:"F4",F5_0:"F5",F6_0:"F6",F7_0:"F7",F8_0:"F8",F9_0:"F9",F10_0:"F10",F11_0:"F11",F12_0:"F12",Home_0:"Home",Insert_0:"Insert",a_0:"KeyA",A_0:"KeyA",b_0:"KeyB",B_0:"KeyB",c_0:"KeyC",C_0:"KeyC",d_0:"KeyD",D_0:"KeyD",e_0:"KeyE",E_0:"KeyE",f_0:"KeyF",F_0:"KeyF",g_0:"KeyG",G_0:"KeyG",h_0:"KeyH",H_0:"KeyH",i_0:"KeyI",I_0:"KeyI",j_0:"KeyJ",J_0:"KeyJ",k_0:"KeyK",K_0:"KeyK",l_0:"KeyL",L_0:"KeyL",m_0:"KeyM",M_0:"KeyM",n_0:"KeyN",N_0:"KeyN",o_0:"KeyO",O_0:"KeyO",p_0:"KeyP",P_0:"KeyP",q_0:"KeyQ",Q_0:"KeyQ",r_0:"KeyR",R_0:"KeyR",S_0:"KeyS",s_0:"KeyS",t_0:"KeyT",T_0:"KeyT",u_0:"KeyU",U_0:"KeyU",v_0:"KeyV",V_0:"KeyV",w_0:"KeyW",W_0:"KeyW",x_0:"KeyX",X_0:"KeyX",y_0:"KeyY",Y_0:"KeyY",z_0:"KeyZ",Z_0:"KeyZ",Meta_1:"MetaLeft",Meta_2:"MetaRight",__0:"Minus","-_0":"Minus",NumLock_0:"NumLock","0_3":"Numpad0",Insert_3:"Numpad0","1_3":"Numpad1",End_3:"Numpad1","2_3":"Numpad2",ArrowDown_3:"Numpad2","3_3":"Numpad3",PageDown_3:"Numpad3","4_3":"Numpad4",ArrowLeft_3:"Numpad4","5_3":"Numpad5",Clear_3:"Numpad5","6_3":"Numpad6",ArrowRight_3:"Numpad6","7_3":"Numpad7",Home_3:"Numpad7","8_3":"Numpad8",ArrowUp_3:"Numpad8","9_3":"Numpad9",PageUp_3:"Numpad9","+_3":"NumpadAdd","._3":"NumpadDecimal",Delete_3:"NumpadDecimal","/_3":"NumpadDivide",Enter_3:"NumpadEnter","*_3":"NumpadMultiply","-_3":"NumpadSubtract",PageDown_0:"PageDown",PageUp_0:"PageUp",Cancel_0:"Pause",Pause_0:"Pause","._0":"Period",">_0":"Period",PrintScreen_0:"PrintScreen","'_0":"Quote",'"_0':"Quote",ScrollLock_0:"ScrollLock",";_0":"Semicolon",":_0":"Semicolon",Shift_1:"ShiftLeft",Shift_2:"ShiftRight","/_0":"Slash","?_0":"Slash"," _0":"Space",Tab_0:"Tab"},s={},u={},l={},m=[],f=0,A=[],y={},C=[],document.addEventListener("keyup",function(e){var t;t=c[e.key+"_"+e.location],s[t]=0,u[e.keyCode]=0,(l[t]||l[e.keyCode])&&(e.preventDefault(),e.stopPropagation())}),document.addEventListener("keydown",function(e){var t,n,r,a,o,i;if(0<m.length)return a=!1,r=m[f],13===e.keyCode?(F(!0),$.print(""),function(e){var t,n;for(x(e),n=e.readyList.slice(),t=0;t<n.length;t++)n[t](e.val)}(r),(f+=1)>=m.length&&function(){var e,t,n,r;for(e={},t=0;t<m.length;t++)x(n=m[t]),e[n.name]=n.val;for(m=[],f=0,r=A.slice(),A=[],t=0;t<r.length;t++)r[t](e)}()):8===e.keyCode?0<r.val.length&&(a=!0):e.key&&1===e.key.length&&(r.val+=e.key,r.isNumber&&(isNaN(Number(r.val))||r.max&&Number(r.val)>r.max||r.min&&Number(r.val)<r.min||r.isInteger&&"."===e.key)&&(a=!0)),void(a&&(r.val=r.val.substring(0,r.val.length-1)));t=c[e.key+"_"+e.location],n={key:e.key,location:e.location,code:t,keyCode:e.keyCode},s[t]=n,u[e.keyCode]=n,(l[t]||l[e.keyCode])&&(e.preventDefault(),e.stopPropagation());if(y[t])for(i=y[t].slice(),o=0;o<i.length;o++)i[o](n);if(0<C.length)for(i=C.slice(),o=0;o<i.length;o++)i[o](n)}),window.addEventListener("blur",function(){var e;for(e in s)s[e]=0;for(e in u)u[e]=0}),qbs._.addCommand("inkey",function(e){var t,n,r,a;t=e[0],a=isNaN(t)?s:u;if(void 0!==t)return a[t];for(r in n={},s)s[r]&&(n[r]=s[r]);return n},!1,!1),qbs._.addCommand("onkey",function(e){var t,n,r;t=e[0],n=e[1],r=e[2],setTimeout(function(){var e;isNaN(t)||"string"==typeof t?qbs.util.isFunction(n)?(r&&(e=n,n=function(){a(t),e()}),"string"==typeof t&&"any"===t.toLowerCase()?C.push(n):(y[t]||(y[t]=[]),y[t].push(n))):console.error("onkey: fn is not a valid function."):console.error("onkey: key needs to be either an interger keyCode or a string key name.")},1)},!1,!1),qbs._.addCommand("offkey",a,!1,!1),qbs._.addCommand("disableDefaultKey",function(e){var t;if("string"!=typeof(t=e[0])&&isNaN(t))return void console.error("disableDefaultKey: invalid key parameter.");l[t]=!0},!1,!1),qbs._.addCommand("enableDefaultKey",function(e){if("string"!=typeof e&&isNaN(e))return void console.error("disableDefaultKey: invalid key parameter.");delete l[e]},!1,!1),qbs._.addCommand("input",function(e){var t,n,r,a,o,i,s,d;if(t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],e[6],d=e[7],"string"!=typeof t)return void console.error("input: prompt is required and must be a string.");"string"!=typeof n&&void 0!==n&&console.error("input: name must be a string or left blank.");r=qbs.util.sanitizeBool(r),i=qbs.util.sanitizeBool(i),d=[],s={ready:function(e){qbs.util.isFunction(e)&&d.push(e)}},n=n||"input_"+m.length;a=isNaN(Number(a))?null:Number(a);o=isNaN(Number(o))?null:Number(o);return m.push({prompt:t,name:n,isNumber:r,isInteger:i,min:a,max:o,val:"",readyList:d}),h=(new Date).getTime(),g=setInterval(F,100),s},!1,!1),qbs._.addCommand("inputReady",function(e){var t;t=e[0],qbs.util.isFunction(t)&&A.push(t)},!1,!1),qbs._.addCommand("setInputCursor",function(e){var t;t=e[0],isNaN(t)?"string"==typeof t&&(d.screenData.printCursor.prompt=t.charCodeAt(0)):d.screenData.printCursor.prompt=t},!1,!1)}(),function(){"use strict";var c;function u(e,t,n){e[t]=function(){var e=[].slice.call(arguments);return n.commands[t](n,e)}}function l(e,t,n,r,a){var o={};return o.id=c.nextScreenId,c.nextScreenId+=1,c.activeScreen=o,e.dataset.screenId=o.id,o.canvas=e,o.width=e.width,o.height=e.height,o.container=n,o.aspectData=r,o.isOffscreen=a,o.context=e.getContext("2d"),o.bufferCanvas=t,o.bufferContext=o.bufferCanvas.getContext("2d"),o.dirty=!1,o.fColor=7,o.x=0,o.y=0,o.angle=0,o.pal=c.defaultPalette.slice(),o.context.fillStyle=o.pal[o.fColor].s,o.context.strokeStyle=o.pal[o.fColor].s,o.printCursor={charWidth:c.defaultFont.width,charHeight:c.defaultFont.height,x:0,y:0,font:c.defaultFont.data,rows:Math.floor(e.width/c.defaultFont.width),cols:Math.floor(e.height/c.defaultFont.height),prompt:c.defaultPrompt,breakWord:!0,printFunction:c.defaultFont.printFunction,calcWidth:c.defaultFont.calcWidth},o.clientRect=e.getBoundingClientRect(),o.mouse={x:0,y:0,buttons:0},o.touches={},o.pixelMode=!0,o.pen={draw:c.defaultPenDraw,size:1},o.context.imageSmoothingEnabled=!1,o.onMouseEventListeners={},o.onTouchEventListeners={},c.screens[o.id]=o}function m(e,t,n,r){var a,o,i,s,d,c,u;a=e.width,o=e.height,c=e.splitter,s=n*(u=o/a),n<(i=r*(a/o))?(d=(r-(s=(i=n)*u))/2,t.style.marginLeft="0",t.style.marginTop=Math.floor(d)+"px"):(s=r,d=(n-i)/2,t.style.marginLeft=Math.floor(d)+"px",t.style.marginTop="0"),t.style.width=Math.floor(i)+"px",t.style.height=Math.floor(s)+"px","x"===c?(t.width=a,t.height=o):(t.width=t.offsetWidth,t.height=t.offsetHeight)}c=qbs._.data,qbs._.addCommand("screen",function(e){var t,n,r,a,o,i,s,d;t=e[0],n=e[1],r=e[2],"string"==typeof t&&""!==t&&(t=t.toLowerCase(),a=function(e){var t,n,r,a;-1<e.indexOf(":")?a=":":-1<e.indexOf("x")&&(a="x");if(r=e.split(a),t=Number(r[0]),isNaN(t)||0===t)return;if(n=Number(r[1]),isNaN(n)||0===n)return;return{width:t,height:n,splitter:a}}(t));if(r){if(!a)return void console.error("screen: You must supply an aspect ratio with exact dimensions for offscreen screens.");i=function(e){var t,n;return(t=document.createElement("canvas")).width=e.width,t.height=e.height,(n=document.createElement("canvas")).width=e.width,n.height=e.height,l(t,n,null,e,!0)}(a)}else i=function(e,t){var n,r;n=document.createElement("canvas"),r=document.createElement("canvas"),n.style.backgroundColor="black",n.style.position="absolute",n.style.imageRendering="pixelated",n.style.imageRendering="crisp-edges",qbs.util.isDomElement(t)||(document.documentElement.style.height="100%",document.documentElement.style.margin="0",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden",t=document.body,n.style.left="0",n.style.top="0");0===t.offsetHeight&&(t.style.height="200px");t.appendChild(n),e?(m(e,n,t.offsetWidth,t.offsetHeight),r.width=n.width,r.height=n.height):(n.style.width="100%",n.style.height="100%",r.width=n.offsetWidth,r.height=n.offsetHeight,window.addEventListener("resize",function(){r.width=n.offsetWidth,r.height=n.offsetHeight}));return l(n,r,t,e,!1)}(a,n);for(s in i.cache={findColor:{}},o={},i.commands={},c.screenCommands)d=c.screenCommands[s],i.commands[s]=d.fn,u(o,s,i);return(i.screenObj=o).id=i.id,o},!1,!1),window.addEventListener("resize",function(){var e,t;for(e in c.screens)(t=c.screens[e]).isOffscreen||(t.bufferContext.clearRect(0,0,t.width,t.height),t.bufferContext.drawImage(t.canvas,0,0),m(t.aspectData,t.canvas,t.container.offsetWidth,t.container.offsetHeight),t.clientRect=t.canvas.getBoundingClientRect(),t.context.drawImage(t.bufferCanvas,0,0,t.width,t.height),t.bufferCanvas.width=t.canvas.width,t.bufferCanvas.height=t.canvas.height)})}(),function(){"use strict";var i;function t(e){var t;o(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("move",s(t),t.onMouseEventListeners)}function n(e){var t;o(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("down",s(t),t.onMouseEventListeners)}function r(e){var t;o(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("up",s(t),t.onMouseEventListeners)}function a(e){if(!i.screens[e.target.dataset.screenId].isContextMenuEnabled)return e.preventDefault(),!1}function o(e,t){var n,r,a,o,i;n=e.clientRect,r=Math.floor((t.clientX-n.left)/n.width*e.width),a=Math.floor((t.clientY-n.top)/n.height*e.height),e.mouse&&(o=e.mouse.x?e.mouse.x:r,i=e.mouse.y?e.mouse.y:a),e.mouse={x:r,y:a,lastX:o,lastY:i,buttons:t.buttons}}function s(e){var t;return(t={}).x=e.mouse.x,t.y=e.mouse.y,t.lastX=e.mouse.lastX,t.lastY=e.mouse.lastY,t.buttons=e.mouse.buttons,t}function d(e,t){var n,r;n=t[0],r=t[1],i.commands.offevent(n,r,"down","up","move","offmouse",e.onMouseEventListeners)}i=qbs._.data,qbs._.addCommand("startMouse",function(e){e.canvas.addEventListener("mousemove",t),e.canvas.addEventListener("mousedown",n),e.canvas.addEventListener("mouseup",r),e.canvas.addEventListener("contextmenu",a)},!1,!0),qbs._.addCommand("stopMouse",function(e){e.canvas.removeEventListener("mousemove",t),e.canvas.removeEventListener("mousedown",n),e.canvas.removeEventListener("mouseup",r),e.canvas.removeEventListener("contextmenu",a)},!1,!0),qbs._.addCommand("inmouse",s,!1,!0),qbs._.addCommand("onmouse",function(e,t){var n,r,a,o;n=t[0],r=t[1],a=t[2],o=t[3],i.commands.onevent(n,r,a,o,"down","up","move","onmouse",d,e.onMouseEventListeners)},!1,!0),qbs._.addCommand("offmouse",d,!1,!0),qbs._.addCommand("enableContextMenu",function(e,t){var n;n=t[0],i.isContextMenuEnabled=qbs.util.sanitizeBool(n)},!1,!0)}(),function(){"use strict";var i;function t(e){var t;a(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("start",o(t),t.onTouchEventListeners)}function n(e){var t;a(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("move",o(t),t.onTouchEventListeners)}function r(e){var t;a(t=i.screens[e.target.dataset.screenId],e),i.commands.triggerEventListeners("end",o(t),t.onTouchEventListeners)}function a(e,t){var n,r,a,o,i;if(e.clientRect){for(i={},n=e.clientRect,r=0;r<t.touches.length;r++)a=t.touches[r],(o={}).x=Math.floor((a.pageX-n.left)/n.width*e.width),o.y=Math.floor((a.pageY-n.top)/n.height*e.height),o.id=a.identifier,e.touches[o.id]?(o.lastX=e.touches[o.id].x,o.lastY=e.touches[o.id].y):(o.lastX=null,o.lastY=null),i[o.id]=o;e.touches=i}}function o(e){var t,n,r,a;for(n in t=[],e.touches)a={x:(r=e.touches[n]).x,y:r.y,id:r.id,lastX:r.lastX,lastY:r.lastY},t.push(a);return t}function s(e,t){var n,r;n=t[0],r=t[1],i.commands.offevent(n,r,"start","end","move","offtouch",e.onTouchEventListeners)}i=qbs._.data,qbs._.addCommand("startTouch",function(e){e.canvas.addEventListener("touchstart",t),e.canvas.addEventListener("touchmove",n),e.canvas.addEventListener("touchend",r),e.canvas.addEventListener("touchcancel",r)},!1,!0),qbs._.addCommand("stopTouch",function(e){e.canvas.removeEventListener("touchstart",t),e.canvas.removeEventListener("touchmove",n),e.canvas.removeEventListener("touchend",r),e.canvas.removeEventListener("touchcancel",r)},!1,!0),qbs._.addCommand("intouch",o,!1,!0),qbs._.addCommand("ontouch",function(e,t){var n,r,a,o;n=t[0],r=t[1],a=t[2],o=t[3],i.commands.onevent(n,r,a,o,"start","end","move","ontouch",s,e.onTouchEventListeners)},!1,!0),qbs._.addCommand("setPinchZoom",function(e,t){t[0]?document.body.style.touchAction="":document.body.style.touchAction="none"},!1,!0)}(),function(){"use strict";var r;r=qbs._.data,qbs._.addCommand("removeScreen",function(e){var t,n;for(t in n=e.id,e.screenObj)delete e.screenObj[t];e.canvas.parentElement.removeChild(e.canvas),e.canvas=null,delete r.screens[n]},!1,!0),qbs._.addCommand("bgColor",function(e,t){var n,r;n=t[0],r=Number.isInteger(n)?e.pal[n]:qbs.util.convertToColor(n);{if(!r||"string"!=typeof r.s)return void console.error("bgColor: invalid color value for parameter c.");e.canvas.style.backgroundColor=r.s}},!1,!0),qbs._.addCommand("containerBgColor",function(e,t){var n,r;if(n=t[0],e.container)return(r=Number.isInteger(n)?e.pal[n]:qbs.util.convertToColor(n))&&"string"==typeof r.s?void(e.container.style.backgroundColor=r.s):void console.error("containerBgColor: invalid color value for parameter c.")},!1,!0),qbs._.addCommand("canvas",function(e){return e.canvas},!1,!0),qbs._.addCommand("findColor",function(e,t){var n,r,a,o,i,s,d,c;n=t[0],void 0===(r=t[1])&&(r=0);if(o=e.pal,e.cache.findColor[n.s])return e.cache.findColor[n.s];for(a=0;a<o.length;a++){if(0===r&&o[a].s===n.s)return e.cache.findColor[n.s]=a;if(i=o[a].r-n.r,s=o[a].g-n.g,d=o[a].b-n.b,c=o[a].a-n.a,i*i+s*s+d*d+c*c<=r)return e.cache.findColor[n.s]=a}return o.push(n),e.cache.findColor[n.s]=o.length-1,o.length-1},!1,!0),qbs._.addCommand("setPixelMode",function(e,t){if(t[0])for(i in e.context.imageSmoothingEnabled=!0,e.pixelMode=!0,e.pixelCommands)e.commands[i]=e.pixelCommands[i];else for(i in e.context.imageSmoothingEnabled=!1,e.pixelMode=!1,e.antiAliasCommands)e.commands[i]=e.antiAliasCommands[i]},!1,!0),qbs._.addCommand("triggerEventListeners",function(e,t,n){var r,a,o,i,s;if(n[e])for(r=n[e].slice(),a=0;a<r.length;a++)if(r[a].hitBox)if(Array.isArray(t)){for(s=[],o=0;o<t.length;o++)i=t[o],qbs.util.inRange(i,r[a].hitBox)&&s.push(i);0<s.length&&r[a].fn(s)}else qbs.util.inRange(t,r[a].hitBox)&&r[a].fn(t);else r[a].fn(t)},!0,!0),qbs._.addCommand("onevent",function(n,r,e,a,o,i,s,d,c,u){setTimeout(function(){var t;n===o||n===i||n===s?qbs.util.isFunction(r)?(e&&(t=r,r=function(e){c(n,r),t(e)}),u[n]||(u[n]=[]),u[n].push({fn:r,hitBox:a})):console.error(d+": fn is not a valid function."):console.error(d+": mode needs to be either up, down, or move.")},1)},!0,!0),qbs._.addCommand("offevent",function(e,t,n,r,a,o,i){var s,d;if(e!==n&&e!==r&&e!==a)return void console.error(o+": mode needs to be either up, down, or move.");if(!qbs.util.isFunction(t))return void console.error(o+": fn is not a valid function.");s=!1,qbs.util.isFunction(t)||(s=!0);if(i[e])if(s)i[e]=[];else for(d=i[e].length-1;0<=d;d--)i[e][d]===t&&i[e].splice(d,1)},!0,!0)}(),function(){"use strict";var l;function e(e,t,n,r){var a,o;t<0||t>=e.width||n<0||n>=e.height||(l.commands.getImageData(e),a=e.imageData.data,o=4*(e.width*n+t),r=i(e,r),a[o]=r.r,a[1+o]=r.g,a[2+o]=r.b,a[3+o]=r.a,e.dirty=!0)}function i(e,t){var n,r,a,o;return(n=e.pen.noise)?(o={r:t.r,g:t.g,b:t.b,a:t.a},a=n/2,Array.isArray(n)?(o.r=qbs.util.clamp(Math.round(o.r+qbs.util.rndRange(-n[0],n[0])),0,255),o.g=qbs.util.clamp(Math.round(o.g+qbs.util.rndRange(-n[1],n[1])),0,255),o.b=qbs.util.clamp(Math.round(o.b+qbs.util.rndRange(-n[2],n[2])),0,255),o.a=qbs.util.clamp(o.a+qbs.util.rndRange(-n[3],n[3]),0,255)):(r=Math.round(Math.random()*n-a),o.r=qbs.util.clamp(o.r+r,0,255),o.g=qbs.util.clamp(o.g+r,0,255),o.b=qbs.util.clamp(o.b+r,0,255)),o):t}function t(e,t,n,r){var a,o,i,s;for(a=2*e.pen.size-1,s=Math.round(a/2)-1,i=0;i<a;i++)for(o=0;o<a;o++)l.commands.setPixelSafe(e,o+t-s,i+n-s,r);e.dirty=!0}function n(e,t,n,r){var a,o,i,s,d,c,u;if(2===e.pen.size)return l.commands.setPixelSafe(e,t,n,r),l.commands.setPixelSafe(e,t+1,n,r),l.commands.setPixelSafe(e,t-1,n,r),l.commands.setPixelSafe(e,t,n+1,r),l.commands.setPixelSafe(e,t,n-1,r),void(e.dirty=!0);for(a=2*e.pen.size,u=(o=e.pen.size)-1,s=0;s<a;s++)for(i=0;i<a;i++)d=i-u,c=s-u,Math.round(Math.sqrt(d*d+c*c))<o&&l.commands.setPixelSafe(e,d+t,c+n,r);e.dirty=!0}function r(e,t,n){var r,a;return{r:(r=e.imageData.data)[a=4*(e.width*n+t)],g:r[1+a],b:r[2+a],a:r[3+a]}}l=qbs._.data,qbs._.addCommand("getImageData",function(e){!1===e.dirty&&(e.imageData=e.context.getImageData(0,0,e.width,e.height))},!0,!1),qbs._.addCommand("setPixel",function(e,t,n,r){var a,o;a=e.imageData.data,o=4*(e.width*n+t),a[o]=r.r,a[1+o]=r.g,a[2+o]=r.b,a[3+o]=r.a},!0,!1),qbs._.addCommand("setPixelSafe",e,!0,!1),qbs._.addPen("pixel",e,"square"),qbs._.addCommand("getPixelColor",i,!0,!1),qbs._.addCommand("drawSquarePen",t,!0,!1),qbs._.addPen("square",t,"square"),qbs._.addCommand("drawCirclePen",n,!0,!1),qbs._.addPen("circle",n,"round"),qbs._.addCommand("getPixel",r,!0,!1),qbs._.addCommand("getPixelSafe",function(e,t,n){return l.commands.getImageData(e),r(e,t,n)},!0,!1),l.defaultPenDraw=e}(),function(){"use strict";var y;y=qbs._.data,qbs._.addCommands("circle",function(e,t){var n,r,a,o,i,s,d;if(n=t[0],r=t[1],a=t[2],y.commands.getImageData(e),isNaN(n)||isNaN(r)||isNaN(a))return void console.error("circle: Argument's cx, cy, r must be numbers.");if(d=e.pal[e.fColor],i=0,1<(o=--a))e.pen.draw(e,o+n,i+r,d),e.pen.draw(e,-o+n,i+r,d),e.pen.draw(e,n,o+r,d),e.pen.draw(e,n,-o+r,d);else{if(1===a)return e.pen.draw(e,n+1,r,d),e.pen.draw(e,n-1,r,d),e.pen.draw(e,n,r+1,d),e.pen.draw(e,n,r-1,d),void(e.dirty=!0);if(0===a)return e.pen.draw(e,n,r,d),void(e.dirty=!0)}s=1-a;for(;i<o;)i+=1,s=s<=0?s+2*i+1:s+2*i-2*--o+1,e.pen.draw(e,o+n,i+r,d),e.pen.draw(e,-o+n,i+r,d),e.pen.draw(e,o+n,-i+r,d),e.pen.draw(e,-o+n,-i+r,d),o!=i&&(e.pen.draw(e,i+n,o+r,d),e.pen.draw(e,-i+n,o+r,d),e.pen.draw(e,i+n,-o+r,d),e.pen.draw(e,-i+n,-o+r,d));e.dirty=!0},function(e,t){var n,r,a,o,i;if(n=t[0]+.5,r=t[1]+.5,a=t[2]-.9,isNaN(n)||isNaN(r)||isNaN(a))return void console.error("circle: parameters cx, cy, r must be numbers.");e.dirty&&e.screenObj.render();o=qbs.util.degreesToRadian(0),i=qbs.util.degreesToRadian(360),e.context.beginPath(),e.context.strokeStyle=e.pal[e.fColor].s,e.context.moveTo(n+Math.cos(o)*a,r+Math.sin(o)*a),e.context.arc(n,r,a,o,i),e.context.stroke()}),qbs._.addCommands("arc",function(r,e){var a,o,t,i,s,d,n,c,u,l;function m(e,t){var n;n=((n=qbs.util.radiansToDegrees(Math.atan2(t-o,e-a)))+360)%360,l?(i<=n||n<=s)&&r.pen.draw(r,e,t,d):i<=n&&n<=s&&r.pen.draw(r,e,t,d)}a=e[0],o=e[1],t=e[2],i=e[3],s=e[4],l=!1,(i=(i+360)%360)>(s=(s+360)%360)&&(l=!0);if(y.commands.getImageData(r),isNaN(a)||isNaN(o)||isNaN(t))return void console.error("circle: Argument's cx, cy, r must be numbers.");d=r.pal[r.fColor],--t<0&&(t=0);if(c=0,1<(n=t))m(n+a,c+o),m(-n+a,c+o),m(a,n+o),m(a,-n+o);else{if(1===t)return m(a+1,o),m(a-1,o),m(a,o+1),m(a,o-1),void(r.dirty=!0);if(0===t)return r.pen.draw(r,a,o,d),void(r.dirty=!0)}u=1-t;for(;c<n;)c+=1,u=u<=0?u+2*c+1:u+2*c-2*--n+1,m(n+a,c+o),m(-n+a,c+o),m(n+a,-c+o),m(-n+a,-c+o),n!=c&&(m(c+a,n+o),m(-c+a,n+o),m(c+a,-n+o),m(-c+a,-n+o));r.dirty=!0},function(e,t){var n,r,a,o,i;if(n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o)||isNaN(i))return void console.error("arc: parameters cx, cy, r, a1, a2 must be numbers.");n+=.5,r+=.5,(a-=.9)<0&&(a=0);e.dirty&&e.screenObj.render();o=qbs.util.degreesToRadian(o),i=qbs.util.degreesToRadian(i),e.context.beginPath(),e.context.strokeStyle=e.pal[e.fColor].s,e.context.moveTo(n+Math.cos(o)*a,r+Math.sin(o)*a),e.context.arc(n,r,a,o,i),e.context.stroke()}),qbs._.addCommands("ellipse",function(e,t){var n,r,a,o,i,s,d,c,u,l,m;if(o=t[0],i=t[1],r=t[2],a=t[3],isNaN(o)||isNaN(i)||isNaN(r)||isNaN(a))return void console.error("ellipse: parameters cx, cy, rx, ry must be numbers.");if(y.commands.getImageData(e),n=e.pal[e.fColor],0===r&&0===a)return e.pen.draw(e,o,i,n),void(e.dirty=!0);c=(m=a)*a-r*r*a+.25*r*r,s=2*a*a*(l=0),d=2*r*r*m;for(;s<d;)e.pen.draw(e,l+o,m+i,n),e.pen.draw(e,-l+o,m+i,n),e.pen.draw(e,l+o,-m+i,n),e.pen.draw(e,-l+o,-m+i,n),c=c<0?(l++,c+(s+=2*a*a)+a*a):(l++,m--,c+(s+=2*a*a)-(d-=2*r*r)+a*a);u=a*a*((l+.5)*(l+.5))+r*r*((m-1)*(m-1))-r*r*a*a;for(;0<=m;)e.pen.draw(e,l+o,m+i,n),e.pen.draw(e,-l+o,m+i,n),e.pen.draw(e,l+o,-m+i,n),e.pen.draw(e,-l+o,-m+i,n),u=0<u?(m--,u+r*r-(d-=2*r*r)):(m--,l++,u+(s+=2*a*a)-(d-=2*r*r)+r*r);e.dirty=!0},function(e,t){var n,r,a,o;if(n=t[0],r=t[1],a=t[2],o=t[3],isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o))return void console.error("ellipse: parameters cx, cy, rx, ry must be numbers.");e.dirty&&e.screenObj.render();e.context.beginPath(),e.context.strokeStyle=e.pal[e.fColor].s,e.context.moveTo(n+a,r),e.context.ellipse(n,r,a,o,0,qbs.util.math.deg360,!1),e.context.stroke()}),qbs._.addCommand("put",function(e,t){var n,r,a,o,i,s,d,c,u,l,m;if(n=t[0],r=t[1],a=t[2],!n||n.length<1)return;s=r<0?-1*r:0;d=a<0?-1*a:0;c=n[0].length-s,u=n.length-d,r+s+c>=e.width&&(c=e.width-r+s);a+d+u>=e.height&&(u=e.height-a+d);if(c<=0||u<=0)return;for(y.commands.getImageData(e),i=d;i<d+u;i++)for(o=s;o<s+c;o++)m=e.pal[n[i][o]],l=4*(e.width*(a+i)+(r+o)),0<m.a&&(e.imageData.data[l]=m.r,e.imageData.data[1+l]=m.g,e.imageData.data[2+l]=m.b,e.imageData.data[3+l]=m.a);e.dirty=!0},!1,!0),qbs._.addCommand("get",function(e,t){var n,r,a,o,i,s,d,c,u,l,m,f,h,g,p,b,v,A;n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],n=qbs.util.clamp(n,0,e.width-1),a=qbs.util.clamp(a,0,e.width-1),r=qbs.util.clamp(r,0,e.height-1),o=qbs.util.clamp(o,0,e.height-1),a<n&&(s=n,n=a,a=s);o<r&&(s=r,r=o,o=s);if(d=o-r,a-n<=0||d<=0)return[[]];for(y.commands.getImageData(e),c=e.imageData,u=[],v=0,m=r;m<o;m++){for(u.push([]),l=n;l<a;l++)b=4*(e.width*m+l),h=c.data[b],g=c.data[1+b],p=c.data[2+b],A=c.data[3+b],f=e.screenObj.findColor(qbs.util.rgbToColor(h,g,p,A),i),u[v].push(f);v+=1}return u},!1,!0),qbs._.addCommand("pset",function(e,t){var n,r,a;if(n=t[0],r=t[1],!Number.isInteger(n)||!Number.isInteger(r))return void console.error("pset: Argument's x and y must be integers.");if(!qbs.util.inRange2(n,r,0,0,e.width,e.height))return void console.error("pset: Argument's x and y are not on the screen.");e.x=n,e.y=r,a=e.pal[e.fColor],y.commands.getImageData(e),e.pen.draw(e,n,r,a),e.dirty=!0},!1,!0),qbs._.addCommands("line",function(e,t){var n,r,a,o,i,s,d,c,u,l,m;if(n=t[0],r=t[1],a=t[2],o=t[3],!(Number.isInteger(n)&&Number.isInteger(r)&&Number.isInteger(a)&&Number.isInteger(o)))return void console.error("line: Argument's x1, y1, x2, and y2 must be integers.");i=e.pal[e.fColor],s=Math.abs(a-n),d=Math.abs(o-r),c=n<a?1:-1;u=r<o?1:-1;l=s-d,y.commands.getImageData(e),e.pen.draw(e,n,r,i);for(;n!==a||r!==o;)-d<(m=l<<1)&&(l-=d,n+=c),m<s&&(l+=s,r+=u),e.pen.draw(e,n,r,i);e.dirty=!0},function(e,t){var n,r,a,o;if(n=t[0],r=t[1],a=t[2],o=t[3],isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o))return void console.error("line: parameters x1, y1, x2, y2 must be numbers.");e.dirty&&e.screenObj.render();e.context.strokeStyle=e.pal[e.fColor].s,e.context.beginPath(),e.context.moveTo(n,r),e.context.lineTo(a,o),e.context.stroke()}),qbs._.addCommands("rect",function(e,t){var n,r,a,o,i,s;n=t[0],r=t[1],a=t[2],o=t[3],i=n+a,s=r+o,e.screenObj.line(n,r,i,r),e.screenObj.line(i,r,i,s),e.screenObj.line(i,s,n,s),e.screenObj.line(n,s,n,r)},function(e,t){var n,r,a,o;if(n=t[0],r=t[1],a=t[2],o=t[3],isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o))return void console.error("rect: parameters x, y, width, height must be numbers.");e.dirty&&e.screenObj.render();e.context.beginPath(),e.context.strokeStyle=e.pal[e.fColor].s,e.context.rect(n,r,a,o),e.context.stroke()}),qbs._.addCommand("setPalColor",function(e,t){var n,r,a;if(n=t[0],r=t[1],!Number.isInteger(n))return void console.error("setPalColor: parameter i must be an integer value.");if(null===(a=qbs.util.convertToColor(r)))return void console.error("setPalColor: parameter c is not a valid color format.");e.pal[n]=a},!1,!0),qbs._.addCommand("getPal",function(e,t){var n,r;for(r=[],n=0;n<e.pal.length;n++)e.pal[n].r,e.pal[n].g,e.pal[n].b,e.pal[n].a,e.pal[n].s,r.push(e.pal[n]);return r},!1,!0),qbs._.addCommand("color",function(e,t){var n,r;if(n=t[0],Number.isInteger(n)){if(n>e.pal.length)return void console.error("color: parameter c is not a color in the palette.");e.fColor=n}else{if(null===(r=qbs.util.convertToColor(n)))return void console.error("color: parameter c is not a valid color format.");e.fColor=e.screenObj.findColor(r)}e.context.fillStyle=e.pal[e.fColor].s,e.context.strokeStyle=e.pal[e.fColor].s},!1,!0),qbs._.addCommand("swapColor",function(e,t){var n,r,a,o,i,s;{if(n=t[0],r=t[1],!Number.isInteger(n))return void console.error("swapColor: parameter oldColor must be an integer.");if(n<0||n>e.pal.length)return void console.error("swapColor: parameter oldColor is an invalid integer.")}if(a=n,n=e.pal[a],null===(r=qbs.util.convertToColor(r)))return void console.error("swapColor: parameter newColor is not a valid color format.");for(y.commands.getImageData(e),data=e.imageData.data,i=0;i<e.height;i++)for(o=0;o<e.width;o++)s=4*(e.width*i+o),data[s]===n.r&&data[1+s]===n.g&&data[2+s]===n.b&&data[3+s]===n.a&&(data[s]=r.r,data[1+s]=r.g,data[2+s]=r.b,data[3+s]=r.a);e.dirty=!0,e.pal[a]=r},!1,!0),qbs._.addCommand("point",function(e,t){var n,r,a,o,i;return n=t[0],r=t[1],Number.isInteger(n)&&Number.isInteger(r)?(y.commands.getImageData(e),i=e.imageData.data,a=4*(e.width*r+n),o=qbs.util.convertToColor({r:i[a],g:i[1+a],b:i[2+a],a:i[3+a]}),e.screenObj.findColor(o)):void console.error("point: Argument's x and y must be integers.")},!1,!0),qbs._.addCommand("cls",function(e){e.context.clearRect(0,0,e.width,e.height),e.imageData=null,e.printCursor.x=0,e.printCursor.y=0,e.x=0,e.y=0,e.dirty=!1},!1,!0),qbs._.addCommand("render",function(e){e.imageData&&e.dirty&&e.context.putImageData(e.imageData,0,0);e.dirty=!1},!1,!0),qbs._.addCommand("setPen",function(e,t){var n,r,a,o;if(n=t[0],r=t[1],a=t[2],!y.pens[n])return void console.error("setPen: Argument pen is not a valid pen. Valid pens: "+y.penList.join(", "));if(!Number.isInteger(r))return void console.error("setPen: Argument size is not a valid number.");if(a&&!Array.isArray(a)&&Number.isNaN(a))return void console.error("setPen: Argument noise is not an array or number.");if(Array.isArray(a)){for(a=a.slice(),o=0;o<a.length;o++)if(Number.isNaN(a[o]))return void console.error("setPen: Argument noise array contains an invalid value.");for(;o<4;o++)a.push(0)}r<1&&(r=1);1===r?(e.pen.draw=y.pens.pixel.cmd,e.context.lineWidth=1):(e.pen.draw=y.pens[n].cmd,e.context.lineWidth=2*r-1);e.pen.noise=a,e.pen.size=r,e.context.lineCap=y.pens[n].cap},!1,!0)}(),function(){"use strict";var c,u,l,m;function f(e,t,n,r){r=c.commands.getPixelColor(e,r),c.commands.setPixel(e,t,n,r)}function h(e,t,n,r,a,o,i){var s;!function(e,t,n,r,a){var o,i,s,d;if(t<0||t>=e.width||n<0||n>=e.height)return;return o=c.commands.getPixel(e,t,n),!function(e,t){var n;if(m[n=e+" "+t])return 1;m[n]=!0}(t,n)&&(i=o.r-r.r,s=o.g-r.g,d=o.b-r.b,a<=(u-(i*i+s*s+d*d))/u)}(e,t,n,o,i)||(l(e,t,n,a),s={x:t,y:n},r.push(s))}c=qbs._.data,u=195075,qbs._.addCommand("paint",function(e,t){var n,r,a,o,i,s,d;if(n=t[0],r=t[1],a=t[2],o=t[3],!Number.isInteger(n)||!Number.isInteger(r))return void console.error("paint: Argument's x and y must be integers.");0===o||o||(o=1);if(isNaN(o))return void console.error("paint: Argument tolerance must be a number.");o*=2-o,i=[{x:n,y:r}],l=e.pen.noise?f:c.commands.setPixel;if(Number.isInteger(a)){if(a>e.pal.length)return void console.error("paint: Argument fillColor is not a color in the palette.");a=e.pal[a]}else if(null===(a=qbs.util.convertToColor(a)))return void console.error("paint: Argument fillColor is not a valid color format.");m={},c.commands.getImageData(e),d=c.commands.getPixel(e,n,r);for(;0<i.length;)s=i.pop(),l(e,s.x,s.y,a),h(e,s.x+1,s.y,i,a,d,o),h(e,s.x-1,s.y,i,a,d,o),h(e,s.x,s.y+1,i,a,d,o),h(e,s.x,s.y-1,i,a,d,o);m=null,e.dirty=!0},!1,!0)}(),function(){"use strict";var v;function A(e,t){var n,r;return(n=e.x-t.x)*n+(r=e.y-t.y)*r}function y(e,t){var n,r,a,o,i;return a=(r=(n=1-e)*n)*n,i=(o=e*e)*e,{x:Math.round(a*t[0].x+3*r*e*t[1].x+3*n*o*t[2].x+i*t[3].x),y:Math.round(a*t[0].y+3*r*e*t[1].y+3*n*o*t[2].y+i*t[3].y)}}v=qbs._.data,qbs._.addCommands("bezier",function(e,t){var n,r,a,o,i,s,d,c,u,l,m,f,h,g,p,b;if(n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],d=t[6],c=t[7],isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o)||isNaN(i)||isNaN(s)||isNaN(d)||isNaN(c))return void console.error("pset: Argument's x1, y1, x2, y2, x3, y3, x4 and y4 must be numbers.");u=e.pal[e.fColor],v.commands.getImageData(e),b=e.pen.size,g=y(0,l=[{x:n,y:r},{x:a,y:o},{x:i,y:s},{x:d,y:c}]),e.pen.draw(e,g.x,g.y,u),f=m=.1;for(;m<1;)h=y(m,l),p=A(h,g),b<p&&1e-5<f?(m-=f,f*=.75):(e.pen.draw(e,h.x,h.y,u),g=h),m+=f;h=y(1,l),e.pen.draw(e,h.x,h.y,u),e.dirty=!0},function(e,t){var n,r,a,o,i,s,d,c;if(n=t[0]+.5,r=t[1]+.5,a=t[2]+.5,o=t[3]+.5,i=t[4]+.5,s=t[5]+.5,d=t[6]+.5,c=t[7]+.5,isNaN(n)||isNaN(r)||isNaN(a)||isNaN(o)||isNaN(i)||isNaN(s)||isNaN(d)||isNaN(c))return void console.error("bezier: parameters x, y, x2, y2, x3, y3, x4, and y4 must be numbers.");e.dirty&&e.screenObj.render();e.context.strokeStyle=e.pal[e.fColor].s,e.context.beginPath(),e.context.moveTo(n,r),e.context.bezierCurveTo(a,o,i,s,d,c),e.context.stroke()})}(),function(){"use strict";var u,a,o;u=qbs._.data,a=qbs._.wait,o=qbs._.resume,qbs._.addCommand("loadImage",function(e){var t,n,r;t=e[0],"string"!=typeof(n=e[1])&&(n=""+u.imageCount,u.imageCount+=1);return(r=new Image).src=t,a(),r.onload=function(){u.images[n]=r,o()},n},!1,!1),qbs._.addCommand("drawImage",function(e,t){var n,r,a,o,i,s,d,c;if(n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],"string"==typeof n){if(!u.images[n])return void console.error("drawImage: invalid image name");d=u.images[n]}else{if(!n||!n.canvas)return void console.error("drawImage: image source object type. Must be an image already loaded by the loadImage command or a screen.");d=n.canvas()}!function(e,t,n,r,a,o,i,s){var d,c;a=a||0;a=qbs.util.degreesToRadian(a),o=o||0;i=i||0;s||0===s||(s=255);o=Math.round(t.width*o),i=Math.round(t.height*i),d=e.context,c=d.globalAlpha,d.globalAlpha=s/255,e.dirty&&e.screenObj.render();d.translate(n,r),d.rotate(a),d.drawImage(t,-o,-i),d.rotate(-a),d.translate(-n,-r),d.globalAlpha=c}(e,d,r,a,o,i,s,c)},!1,!0)}(),function(){"use strict";var u,n,v;function l(e,t,n){var r,a,o,i,s,d,c;if((r=(c=e.printCursor).calcWidth(e,t))+c.x>e.width&&!n&&1<t.length)return a=(r-(r+c.x-e.width))/r,o=Math.floor(t.length*a),s=t.substring(0,o),d=t.substring(o,t.length),c.breakWord&&-1<(i=s.lastIndexOf(" "))&&(d=s.substring(i).trim()+d,s=s.substring(0,i)),l(e,s,n),void l(e,d,n);c.y+c.charHeight>e.height&&(e.screenObj.render(),e.bufferContext.clearRect(0,0,e.width,e.height),e.bufferContext.drawImage(e.canvas,0,0),e.context.clearRect(0,0,e.width,e.height),e.context.drawImage(e.bufferCanvas,0,-c.charHeight),e.dirty=!1,u.commands.getImageData(e),c.y-=c.charHeight),c.printFunction(e,t,c.x,c.y),n?(c.x+=c.charWidth*t.length,c.x>e.width-c.charWidth&&(c.x=0,c.y+=c.charHeight)):(c.y+=c.charHeight,c.x=0)}function o(e,t){return e.printCursor.charWidth*t.length}function i(e,t){return e.context.measureText(t).width}function s(e,t,n,r){var a,o,i;for(o=e.printCursor,i=e.pal,e.pal=[i[0],i[e.fColor]],a=0;a<t.length;a++)e.screenObj.put(o.font[t.charCodeAt(a)],n+o.charWidth*a,r);e.pal=i}function d(e,t,n,r){e.context.fillText(t,n,r)}u=qbs._.data,n=qbs._.wait,v=qbs._.resume,qbs._.addCommand("print",function(e,t){var n,r,a,o;n=t[0],r=t[1],void 0===n?n="":"string"!=typeof n&&(n=""+n);for(n=n.replace(/\t/g,"    "),a=n.split(/\n/),o=0;o<a.length;o++)l(e,a[o],r)},!1,!0),qbs._.addCommand("setWordBreak",function(e,t){t[0]?e.printCursor.breakWord=!0:e.printCursor.breakWord=!1},!1,!0),qbs._.addCommand("locate",function(e,t){var n,r,a,o;n=t[0],r=t[1],null!==n&&((a=Math.floor(n*e.printCursor.charWidth))>e.width&&(a=e.width-e.printCursor.charWidth),e.printCursor.x=a);null!==r&&((o=Math.floor(r*e.printCursor.charHeight))>e.height&&(o=e.height-e.printCursor.charHeight),e.printCursor.y=o)},!1,!0),qbs._.addCommand("locatePx",function(e,t,n,r){n=t[0],r=t[1],isNaN(n)||(e.printCursor.x=parseInt(n));isNaN(r)||(e.printCursor.y=parseInt(r))},!1,!0),qbs._.addCommand("pos",function(e){return{col:Math.floor(e.printCursor.x/e.printCursor.charWidth),row:Math.floor(e.printCursor.y/e.printCursor.charHeight)}},!1,!0),qbs._.addCommand("posPx",function(e){return{x:e.printCursor.x,y:e.printCursor.y}},!1,!0),qbs._.addCommand("loadFont",function(e){var t,h,g,p,b;return t=e[0],h=e[1],g=e[2],(p=new Image).src=t,b={id:u.nextFontId,width:h,height:g,data:[]},u.fonts[b.id]=b,u.nextFontId+=1,n(),p.onload=function(){var e,t,n,r,a,o,i,s,d,c,u,l,m,f;for(t=(e=document.createElement("canvas")).getContext("2d"),e.width=p.width,e.height=p.height,t.drawImage(p,0,0),n=t.getImageData(0,0,p.width,p.height),d=s=0,c=p.width,r=0;r<255;r++){for(b.data.push([]),o=d;o<d+g;o++)for(b.data[r].push([]),a=s;a<s+h;a++)i=o*(4*c)+4*a,u=n.data[i],l=n.data[1+i],m=n.data[2+i],f=n.data[3+i],(1<u||1<l||1<m)&&1<f?b.data[r][o-d].push(1):b.data[r][o-d].push(0);c<=(s+=h)&&(s=0,d+=g)}v()},b.id},!1,!1),qbs._.addCommand("setFont",function(e,t){var n,r,a;n=t[0],u.fonts[n]?(r=u.fonts[n],e.printCursor.font=r.data,e.printCursor.charWidth=r.width,e.printCursor.charHeight=r.height,e.printCursor.cols=Math.floor(e.width/r.width),e.printCursor.rows=Math.floor(e.height/r.height),e.printCursor.printFunction=s,e.printCursor.calcWidth=o):"string"==typeof n&&(e.context.font=n,e.context.textBaseline="top",e.printCursor.font=e.context.font,a=function(e){var t,n,r,a,o,i,s,d,c,u,l,m;t=e.font,r=t.indexOf("px"),t=t.substring(0,r),-1===(n=t.lastIndexOf(" "))&&(n=0);for(a=parseInt(t.substring(n,r)),a=Math.round(1.5*a),(o=document.createElement("canvas")).width=a,o.height=a,(i=o.getContext("2d")).font=e.font,i.textBaseline="top",i.fillStyle="#FF0000",u={width:0,height:0},s="HMIyjg_",d=0;d<s.length;d++)i.fillText(s[d],0,0);for(s=i.getImageData(0,0,a,a),d=0;d<s.data.length;d+=4)255===s.data[d]&&(c=d/4,m=Math.floor(c/a),l=c-m*a,m>u.height&&(u.height=m),l>u.width&&(u.width=l));return u}(e.context),e.printCursor.charWidth=a.width,e.printCursor.charHeight=a.height,e.printCursor.cols=Math.floor(e.width/a.width),e.printCursor.rows=Math.floor(e.height/a.height),e.printCursor.printFunction=d,e.printCursor.calcWidth=i)},!1,!0),u.defaultFont.printFunction=s,u.defaultFont.calcWidth=o}(),function(){"use strict";function A(e,t){return e=parseInt(e),isNaN(e)&&(e=t),e}qbs._.data,qbs._.addCommand("draw",function(e,t){var n,r,a,o,i,s,d,c,u,l,m,f,h,g,p,b,v;if(n=(n=t[0]).toUpperCase(),r=n.match(/(#[A-Z0-9]+)/g))for(a=0;a<r.length;a++)n=n.replace("C"+r[a],"O"+a);for(n=(n=n.replace(/(TA)/gi,"T")).split(/\s+/).join(""),o=/(?=C|C#|R|B|F|G|L|A|T|D|G|H|U|E|N|M|P|S)/,i=n.split(o),s=!1,d={x:e.x,y:e.y,angle:0},u=c=!1,a=0;a<i.length;a++){switch((l=i[a].split(/(\d+)/))[0]){case"C":m=Number(l[1]),e.screenObj.color(m),c=!0;break;case"O":m=r[l[1]],e.screenObj.color(m),c=!0;break;case"D":f=A(l[1],1),h=qbs.util.degreesToRadian(90)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"E":f=A(l[1],1),f=Math.sqrt(f*f+f*f),h=qbs.util.degreesToRadian(315)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"F":f=A(l[1],1),f=Math.sqrt(f*f+f*f),h=qbs.util.degreesToRadian(45)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"G":f=A(l[1],1),f=Math.sqrt(f*f+f*f),h=qbs.util.degreesToRadian(135)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"H":f=A(l[1],1),f=Math.sqrt(f*f+f*f),h=qbs.util.degreesToRadian(225)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"L":f=A(l[1],1),h=qbs.util.degreesToRadian(180)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"R":f=A(l[1],1),h=qbs.util.degreesToRadian(0)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"U":f=A(l[1],1),h=qbs.util.degreesToRadian(270)+e.angle,e.x+=Math.round(Math.cos(h)*f),e.y+=Math.round(Math.sin(h)*f);break;case"P":case"S":g=A(l[1],0),e.screenObj.paint(e.x,e.y,g,"S"===l[0]),c=!0;break;case"A":p=A(l[1],1),b=A(l[3],1),v=A(l[5],1),u=!0;break;case"T":e.angle=qbs.util.degreesToRadian(A(l[1],1)),c=!0;break;case"M":e.x=A(l[1],1),e.y=A(l[3],1),c=!0;break;default:c=!0}c||(u?e.screenObj.arc(e.x,e.y,p,b,v):e.screenObj.line(d.x,d.y,e.x,e.y)),u=c=!1,s&&(s=!1,e.x=d.x,e.y=d.y,e.angle=d.angle),"N"===l[0]?s=!0:d={x:e.x,y:e.y,angle:e.angle},"B"===l[0]&&(c=!0)}},!1,!0)}(),function(){"use strict";var o,i;o={},i=0,qbs._.addCommand("loadSound",function(e){var t,n,r,a;if(t=e[0],n=e[1],!t)return void console.error("loadSound: No sound source provided.");void 0!==n&&!isNaN(n)||(n=1);for(a={pool:[],index:0},r=0;r<n;r++)a.pool.push(new Audio(t));return o[i]=a,(i+=1)-1},!1,!1),qbs._.addCommand("deleteSound",function(e){var t,n;if(t=e[0],o[t]){for(n=0;n<o[t].pool.length;n++)o[t].pool[n].pause();delete o[t]}else console.error("deleteSound: "+t+" not found.")},!1,!1),qbs._.addCommand("play",function(e){var t,n;t=e[0],o[t]?((n=o[t]).pool[n.index].play(),n.index+=1,n.index>=n.pool.length&&(n.index=0)):console.error("play: "+t+" not found.")},!1,!1)}(),function(){"use strict";qbs._.data.commands.loadFont(["data:image/webp;base64,UklGRiIFAABXRUJQVlA4WAoAAAAQAAAAfgEAHwAAQUxQSLcEAAABDzD/ERGC+vX/att2f79rX9dOj+feaysr13Kr0yjDcuWi5FwtcdHKyszMDMkid2VwoMzM7asx2ykzMyQ5TpeXhXAGPptciui/Ardtokzi3gYUPqGXJGMFur6I2q+5EBO7WAlGYNheEctkadwWHEXS+XMZITPYeEmuylqaAl1pvtP/vflPcaNdcihEZxn6fvHpAWLaywPouVTtwTONESyz8OOvHEUtvrm5z3ltsbUyOdGc4Q7afGkZ+v4MxWdDPh5AHoiUboTXGMlfIctSVkHJgpG3f3YqVwtSxU2Y9C3PzH8uARIdGkKvqnUrnxhpcaGUhKyAwBN2d7hauXDk7eZ25ao1VdxQnHl6hc1XRQFl5ORAXEFcI2U3l0AxmHQid3SxZy2+udl8raeVuQJxUe/SFLKrjAKI2RvAtJfHss1F1TQugTJyOhXkKpfh1jLpae53qFi8XUxfc0PiF+PQUgAs46uV3h1RWyiF2HiilyA9Cl1fNLxMWoAMuvlveJuZ3rQFm6HpyxbXKlvmnuqZynmzS6XhnKqVNY4ogFtAvTCY0Qe13uQ64jSPcpv68wQ/DYr57dR0Qe3Lqd04C9oLmAfCIxPY8Jsg+AYZKljyeEyDoq+vmi5YGKeuXoJNFK1sJuU0G7A66D99U8r+bmFv47wUI7FvMc6LYnewnm+j2qtYYlxfrGBMERxg/eawD1Eya6umj7L4uL7dltqhFnuSZMnjx9Bc0cepvjEy4/rW9mAbAn285UESc6L6LFFNbyr5uL6MEYyYIvjzhDSaK6Zzqu8gYwf61KYWgkAW1IH8AidNZolqqJmcfqjP6iSDXmUtrs2fkTv68nDOu6K1N5Qi5pY2LkSgF0jfz5bXu/y9Er2mWZ3WqiItG3kaMt6isf0NO4hXvxMUGpGsVsMvbAZD97CUq0CvMUKI0nphqss2maM9ylrYv4ZNz+phSHMC7PuZYgWBijgVNBMDAApAZQJ7RLqXUETy9mkg8z03CQCfrJET/c+cbwAV1ls+UgpF6y3fCwUbjJPqzoX5JWQ5IpAjYKjXYI+472d6WkHn1My6c0FzemxLsMZRTL2mUm/IpWqcxerx2orYteL6+ZVTtwcC/rkurCDMFKJCr1feUBQXVFL8Ug1tZhpnkH/Y5aCqZgEFjm6LK87NzDynDi2Y36iHU/DnSQohmGb68gx2ORdSD02gqlbRWYMzv702rGFVAyA5JQt2lYwMRaWQS9290RuKSqSI1PHU3RWVNAwOGJMb5/YGHMbVtniz+A4g0KL+67uoIgD/D8djfA1EQAlwMuJkykEAQwCjv8PBGAC4AdynZsB5CRRSLwJ2KFyB4N3RS6spv3WpkOAUWJegTYhscQLvN8UR+bJNVqwsK3a7TqBTnUDXOMZxfZckje1Vr9XJuixstQhojBP4hKLXCowAA3DG6GvFHVegh8dzw71oYo1R4Jdmu5lfVQh/x0pj1251+qegLCsWi5V2uhaLRWKxoNnPBXxFTTVx2dz6DBSC0RY4xV+IAshGARZjDSgIFA3Lf8eC5juugObhQ8KyvCTWBYBFxgB88t83eQ9GkcBunsetF+thFq7MZBEAEP8T9j2QAYAYgeU4+Zei+OcBAFZQOCBEAAAAsAUAnQEqfwEgAD5tNpZJpCMhoSCoKIANiWkKFqACcMq3s2bNmzZs2bNmzZs2bNmzZs2PD7tAAP734AAAANH+1YAAAAA=",6,8])}(),function(){"use strict";qbs._.data.commands.loadFont(["data:image/webp;base64,UklGRpICAABXRUJQVlA4WAoAAAAQAAAAywAAOwAAQUxQSAoCAAABDzD/ERFCsrZta+K8kU5+uHJByDU+aEjdQt37MxpmhZxAvSt37w+DjEvd3f0A3L1su3RZ2co9VPbdRPR/AoCHcg6TAVzKCV8SXskgEqw80z96r3DDAdBG6XVsk225O6UUAD5czHMBAJe+78lHS3hj0vptf/BGsNBve/LRzV9XNX//XoBdm+99KQy3NEqvueJPw8mWbRYgGGjPc5MBTMkJXxIj3n93pxQLX3ydK076AeBeyN20YmfekBnEmyGHtPGMaadU5YE+QbXWxg+KyNUfyIzIeuB5QKRUlpbjgEb6rvDemA8/lP2RTrAuVyWlMg82VdOf1ajBsEw/EP/y9cBzU2Z+laH50oJJwgr3VUNOQbwScUgoTPGnHAp2vnyn5jak+y10P51yQW/d/yokZCFTKFjvJyofS89pPai7mvXjxb1cRbVcc818Rdj/8raXD6XftJ57ZjTrx8kVRRaBa7at4np/t6rF0sfb0n3CzbULijWlXARrsG8UOvtOUW/2nOu3SBy4gDRFtSchpQi4u6Bcwj/9AiuhQPKPUoFibTYlAMS7AZKMOq5OqcyZzIxMSIbtfXFOcjvRWcsj82F9bWzj5cj+VrObu8T6zdZloxzpBo00HV1/bYqYMzd2zSfJMGueeU02KiDWavZMs1pD07mzpC48IRVgzu/nnKsngwkQAVAK6xgAeMTh/2pWUDggYgAAALAGAJ0BKswAPAA+bTKVRyQjIiEpyACADYlpbt0AIYO1AbHZdbiCWCKSvRbVK3CMLio59XFGjGgWcOhfTnpAAP765Ie0Gb5v//9t5L/hVVU536mBYT///bKADnYazgAAAAAA",6,6])}(),function(){"use strict";qbs._.data.commands.loadFont(["data:image/webp;base64,UklGRhwFAABXRUJQVlA4WAoAAAAQAAAA/gEAHwAAQUxQSJoEAAABDzD/ERHCsvr/jSRJv0agrMOfHD/zH0r8Y/zJafiDJiEDaczunvbqbYFA7YKsXm+qkOjHqAdY+w4+oU/9AAXrvRvvTVFaE22fIKL/CtO2YWyark9Qa9hxO+jor48np0dnnudyeghmxlwKgeAsWwDAXiSRVXJJBGBYweXeXNxBH7d/KFevfH5xaSy/voJxZCY8xh0SQszBEhUC4PNSdTRWVYkIpPj+r1t0jv9ejl4vJ6fjcFjLrx1qZW9NGTskNKPOWB4JAH+dvA+D8apENrHH5d5ai+P2xZ/+rNCVv7fG5XcBzNya6bWCEIQ3sNwTEuiAnFM/sETAwDN+uo2xtXH74k91pCt/Hw65HIdauXprSh9BaJ7WuCbsPlnfvJJ6wIIJR393Lkb+ezlSXv5tXFyqOHZ15JGpPdYZQBiKgqgQgcxZUvWqpExEiYDLfWfHOfRxq/WOs58/8/xYjrUyM+YSAuUN2AIEOhNTku+IkCyJGJZQKxAjOrrwwhwBDAg6bkqLG2gBIFIah9ZGle+cvSNnlyRJUs1ZmxjZAWGBFRwW5BfLa9iZs+LFBllKCZ/4RFHyxX77bCha9KkZ2Vp2IFh4BFjA0jXQHGJa7xxoMeX++42SD7bt56JlQao56LOWOIDFihe7CUtfSAdZb9YxquasiZjgDjSaImISebHtIEeNS1K96IQtcwZ81Kh36IZ8oKZadGNI9WLQBxdYIRykWXxdScMnLn4923VYkWpz9EnrGUAsRpPVQl7mFCHV5pSICdloKeETtihpKTkHK0VJ5duBit1jAFpUjY2FNNBF1Ritf1KlhfjEDNE0Du2OQxU523J2d6zOiiTKWZo8LwA2a9nIHf6s6FnJKtbfMfCGQvZpxQs03KodcwdAAAB3fAdzB8wUrKouCFUXGheZVjgUQICtstPh0soBSKMjYLtl4GM/+TUzT8A0YZoYqtgChC2ADEdAUF3oQhkcVI+B1WpACABy5qt616devQEGMoqIjCJLtwxIpzpfRq1PiLIsAWgIBKiilFkME4b9qe1PA1R1z3tviioxZbG+iYiqFjV3pK+MnkSH5w6dTeng16xX7/rUt2fBe9Pe3sQQTYcxRlNTIqamcqr/c46lzJFUNQHG+Ksv8zyGYb8N+9N+a8PAaoqqijWGmHKy11QctZ5Nb7GSqq5rVOPLu9c7TzxNEwD2VU5qrX4UkVGyptOvi0itnoUT5d0qUlUBAfQtBv53vgGCmQ43dAAY9OclrufrvwDw//P1YQaDeZowS56AiYGJGR13vN4BIAFIzq2w5wRk+RITHPC6LIHbgKSmKBsKgeCtJiI6ZtoEwAe+lvenl09e6y/31/rUMb3/PqZ+DRvVYGtZS85cq1EktseM9QwarxNEAAGYBV8v1oMJtFtYW46//vUwC+YEx/DBjni/9/d7f//lk5f7ay/313rv/eT99096H97v/Y7XcY+aYHcLaw76618bBVlmxgbMzwUZ8b/T/2P2mTABPLtPDJ6xHkzQ3cgSgtZqNQHgXVoDCMDtYGNMSEvL5L4tsE6RUuJdAuaX2wAMABgkADCYyUsAwAoAAFZQOCBcAAAAsAcAnQEq/wEgAD5tNplJpCMioSGIAIANiWlu4XdQALf0RTNRXhQoUKE0iVVKklYcOHDhw4cOHDhw4cOHDhw4cOHDXJOUAAD+/ofMO85E5v6k12bAAAMT+8CAAAA=",8,8])}(),function(){"use strict";qbs._.data.commands.loadFont(["data:image/webp;base64,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",8,14])}(),function(){"use strict";qbs._.data.commands.loadFont(["data:image/webp;base64,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",8,16])}(),function(){"use strict";var e,t,n;for((t=qbs._.data).defaultPalette[0]={r:0,g:0,b:0,a:0,s:"#00000000",s2:"#000000"},e=1;e<t.defaultPalette.length;e++)t.defaultPalette[e]=qbs.util.hexToRgb(t.defaultPalette[e]);t.fonts[0]&&(n=t.fonts[0],t.defaultFont.width=n.width,t.defaultFont.height=n.height,t.defaultFont.data=n.data),qbs._.processCommands(),void 0===window.$&&(window.$=window.qbs),delete qbs._}();
//# sourceMappingURL=qbs.min.js.map